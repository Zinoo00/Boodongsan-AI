# ==============================================================================
# Korean Real Estate RAG AI Chatbot - Environment Configuration
# ==============================================================================

# ------------------------------------------------------------------------------
# APPLICATION SETTINGS
# ------------------------------------------------------------------------------

ENVIRONMENT=development
DEBUG=true

# Application Metadata (optional - has defaults)
# APP_NAME=Korean Real Estate RAG AI Chatbot
# APP_VERSION=1.0.0
# API_V1_STR=/api/v1

# Application Secret (auto-generated if not set - MUST be set for production)
# SECRET_KEY=your_32_character_secret_key_here

# ------------------------------------------------------------------------------
# SECURITY & AUTHENTICATION
# ------------------------------------------------------------------------------

# JWT Signing Keys (auto-generated if not set)
# JWT_SECRET_KEY=your_32_character_secret_key_here
# JWT_REFRESH_SECRET_KEY=your_32_character_refresh_secret_key_here

# CORS Origins (comma-separated URLs for frontend access)
# BACKEND_CORS_ORIGINS=http://localhost:3000,https://yourdomain.com

# Allowed Hosts for production (comma-separated)
# ALLOWED_HOSTS=yourdomain.com,api.yourdomain.com

# ------------------------------------------------------------------------------
# REDIS CACHE (REQUIRED)
# ------------------------------------------------------------------------------

REDIS_URL=redis://localhost:6379/0
# Production Redis password
REDIS_PASSWORD=

# Cache Configuration (optional)
# CACHE_TTL=3600

# ------------------------------------------------------------------------------
# STORAGE BACKEND CONFIGURATION
# ------------------------------------------------------------------------------

# Storage backend selection (REQUIRED)
# Options:
#   - "postgresql" (default): AWS RDS PostgreSQL + pgvector (production)
#   - "local": NanoVectorDB + NetworkX + JSON (development/testing)
STORAGE_BACKEND=postgresql

# ------------------------------------------------------------------------------
# POSTGRESQL DATABASE (Default Storage - REQUIRED for production)
# ------------------------------------------------------------------------------

# AWS RDS PostgreSQL connection string
# Format: postgresql+asyncpg://username:password@host:port/database
# Example: postgresql+asyncpg://postgres:mypassword@boda-db.xxxxx.ap-northeast-2.rds.amazonaws.com:5432/boda
DATABASE_URL=

# Database pool configuration (optional - has defaults)
# DATABASE_POOL_SIZE=10
# DATABASE_MAX_OVERFLOW=20
# DATABASE_POOL_TIMEOUT=30
# DATABASE_ECHO=false

# ------------------------------------------------------------------------------
# LIGHTRAG - KNOWLEDGE GRAPH RAG
# ------------------------------------------------------------------------------

# LightRAG working directory (for local backend mode)
LIGHTRAG_WORKING_DIR=./lightrag_storage
LIGHTRAG_WORKSPACE=BODA

# Storage backend modes:
#
# 1. PostgreSQL (default, production):
#    - Vector search: pgvector extension
#    - Graph storage: PostgreSQL JSONB + recursive queries
#    - Document status: PostgreSQL tables
#    - Requires: DATABASE_URL to be set
#
# 2. Local (development/testing):
#    - Vector DB: NanoVectorDB (embedded, local storage)
#    - Graph Storage: NetworkX (local graph storage)
#    - Document Status: JSON files (local storage)
#    - No external database required
#
# Common settings for both backends:
# - Chunk size: 1200 tokens
# - Embedding batch size: 32

# ------------------------------------------------------------------------------
# AI SERVICES - AWS BEDROCK (REQUIRED)
# ------------------------------------------------------------------------------

# AWS Credentials
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=ap-northeast-2

# Bedrock Model Configuration
# Claude Sonnet 4.5 (released September 2025) - Most intelligent model for coding and complex agents
# IMPORTANT: Must use inference profile ID (not direct model ID)
# Global inference profile (recommended - best availability and load balancing)
BEDROCK_MODEL_ID=global.anthropic.claude-sonnet-4-5-20250929-v1:0
# Alternative inference profiles:
# - APAC only: apac.anthropic.claude-sonnet-4-5-20250929-v1:0
# - US only: us.anthropic.claude-sonnet-4-5-20250929-v1:0
# - EU only: eu.anthropic.claude-sonnet-4-5-20250929-v1:0
# - Japan only: jp.anthropic.claude-sonnet-4-5-20250929-v1:0
# - Australia only: au.anthropic.claude-sonnet-4-5-20250929-v1:0
# Legacy models (direct model IDs, not inference profiles):
# - Claude 3 Sonnet: anthropic.claude-3-sonnet-20240229-v1:0
# - Claude 3.5 Sonnet: anthropic.claude-3-5-sonnet-20241022-v2:0

BEDROCK_EMBEDDING_MODEL_ID=amazon.titan-embed-text-v1

# Anthropic (Claude) direct API configuration
# Use this for direct API access (alternative to AWS Bedrock)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL_ID=claude-3-5-sonnet-20241022

# ------------------------------------------------------------------------------
# KOREAN REAL ESTATE OPEN APIS (REQUIRED)
# ------------------------------------------------------------------------------

# 국토교통부 (Ministry of Land, Infrastructure and Transport)
MOLIT_API_KEY=

# Optional APIs
# 주택도시보증공사 (Korea Housing & Urban Guarantee Corporation)
# HUG_API_KEY=
# 주택금융공사 (Korea Housing Finance Corporation)
# HF_API_KEY=
# Seoul Open Data (real-time city snapshot, OA-21285)
SEOUL_OPEN_API_KEY=

# ------------------------------------------------------------------------------
# SERVER & DEPLOYMENT
# ------------------------------------------------------------------------------

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=1

# ASGI Server Selection (uvicorn recommended)
# ASGI_SERVER=uvicorn

# Development Settings
RELOAD=false

# ------------------------------------------------------------------------------
# LOGGING & MONITORING
# ------------------------------------------------------------------------------

# Logging Configuration
LOG_LEVEL=INFO
# LOG_FILE_PATH=/path/to/logfile.log

# Metrics & Monitoring (optional)
ENABLE_METRICS=true
# METRICS_PORT=9090

# ------------------------------------------------------------------------------
# PERFORMANCE TUNING (OPTIONAL)
# ------------------------------------------------------------------------------

# Worker Configuration
# MAX_WORKERS=4
# WORKER_TIMEOUT=120

# Data Collection Settings
# DATA_UPDATE_INTERVAL_HOURS=24
# MAX_CONCURRENT_REQUESTS=10
# REQUEST_TIMEOUT_SECONDS=30

# RAG Configuration
# MAX_SEARCH_RESULTS=10
# SIMILARITY_THRESHOLD=0.7
# MAX_CONTEXT_LENGTH=4000
# RESPONSE_MAX_TOKENS=1000

# File Upload Settings
# UPLOAD_MAX_SIZE=10485760  # 10MB in bytes
# ALLOWED_FILE_TYPES=csv,xlsx,json

# ==============================================================================
# SETUP INSTRUCTIONS
# ==============================================================================

# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in REQUIRED credentials (marked with = and no default value)
# 3. Customize OPTIONAL settings as needed
# 4. For production: Set ENVIRONMENT=production and fill ALL required fields
# 5. Generate JWT keys: python -c "import secrets; print(secrets.token_urlsafe(32))"

# ==============================================================================
# SECURITY NOTES
# ==============================================================================

# - Never commit .env file to version control
# - Use strong, unique values for all secret keys
# - Rotate JWT keys periodically in production
# - Use environment-specific values for each deployment
# - Enable Redis password in production
# - Set specific CORS origins instead of wildcards
